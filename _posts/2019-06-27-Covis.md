---
layout: post
title: 'Easy to Install VisualSFM on Ubuntu 16.04 (64 bits)'
tags: ["VisualSFM", "Ubuntu"]
---

## 1. Install dependencies

```
sudo apt install \
    libgtk2.0-dev \
    libglew-dev \
    libdevil-dev \
    libboost-all-dev \
    libatlas-cpp-0.6-dev \
    libatlas-dev \
    imagemagick \
    libatlas3-base \
    libcminpack-dev \
    libgfortran3 \
    libmetis-edf-dev \
    libparmetis-dev \
    freeglut3-dev \
    libgsl-dev \
    glew-utils
 ```
 
## 2. VisualSFM Setup
- download
```
wget http://ccwu.me/vsfm/download/VisualSFM_linux_64bit.zip
```
- extract
```
unzip VisualSFM_linux_64bit.zip
rm VisualSFM_linux_64bit.zip
```

## 3. SiftGPU Setup
- download
```
cd ~/vsfm
wget https://github.com/pitzer/SiftGPU/archive/master.zip
```
- extract
```
unzip master.zip
rm master.zip
mv SiftGPU-master SiftGPU
```
- generate the shared object libsiftgpu.so
```
cd ~/vsfm/SiftGPU
make
cp ~/vsfm/SiftGPU/bin/libsiftgpu.so ~/vsfm/bin
```

## 4. pba (Multicore Bundle Adjustment) Setup
- download
```
cd ~/vsfm
wget http://grail.cs.washington.edu/projects/mcba/pba_v1.0.5.zip

```
- extract
```
unzip pba_v1.0.5.zip
rm pba_v1.0.5.zip
```
- modification for some files
    - add #include <stdlib.h> to the first row of the following two files 
     (~/vsfm/pba/src/pba/SparseBundleCU.h and ~/vsfm/pba/src/pba/pba.h)
    - you can also copy the commands below
```
# echo -e "#include <stdlib.h>\n$(cat ~/vsfm/pba/src/pba/SparseBundleCU.h)" > ~/vsfm/pba/src/pba/SparseBundleCU.h
# echo -e "#include <stdlib.h>\n$(cat ~/vsfm/pba/src/pba/pba.h)" > ~/vsfm/pba/src/pba/pba.h
```


