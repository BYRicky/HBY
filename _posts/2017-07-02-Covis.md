## Investigation for changing lighting condition (Setting)
- images taken under ten different conditions <br>
  simulating day, night and intermediate lighting levels on the ISS
  - levels are 5, 15, 30, 45, 60, 75, 90, 105, 120, and 135 Lux
  - for each lighting level: 
      - nearly 2500 images were recorded
      - a digital light meter on a fixed point on the wall measured the luminance in Lux
- the robot slides freely on the surface of the table, constrained to motion on the two dimensional plane
- localization algorithm `computes the full 6 DoF camera pose`
- an overhead camera and an AR tag on Astrobee measure the ground truth pose
- an image is labelled as a failure if <br>
  the estimated pose is outside the plane of the granite table (a 1.5x1.5 m area) <br>
  or if localization fails

---

## Observation for changing lighting condition
- dark maps below 45 lux show over an 80% success rate regardless of lighting conditions. 
- bright maps over 60 lux work well only with bright images.
  - why: **the feature descriptors cannot describe features in bright lighting conditions well** <br>
         because many image intensity values are saturated. <br>
         In dark conditions, saturation rarely occurs.
- the most **effective combination for stable localization** is <br>
  to use a map constructed in the **same lighting conditions** as the test images. 

---

## Proposed algorithm
- **be inserted after step 1 and before step 2 of the Online Image Localization**
- **Brightness Recognition + Map Recommendation System**
  - Brightness Recognition
      - on the preise that images taken at similar places under similar lighting <br>
        will have similar intensity distributions
      - for each level:
        - DB query in each lighting level (find the most similar one in terms of BRISK features)
        - compute the `symmetric KL-divergence` (similar to the concept of relative entropy)
      - among all levels, choose the most similar image (the smallest symmetric KL-divergence value)
        - the **smaller** the KL-divergence, the more **similar** the two images are (the **nearest brightness**)
      - Note that the proposed algorithm for a `camera with adjustable exposure time`, not for a camera with automatic exposure control
  - Map Recommendation System
      - requires the construction of multiple sparse maps, <br>
        but enables localization under changing lighting conditions
